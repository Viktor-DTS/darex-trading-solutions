# –ó–í–Ü–¢ –ü–†–û –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø –ñ–£–†–ù–ê–õ–£ –ü–û–î–Ü–ô
## –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞—è–≤–∫–∞–º–∏ DTS

---

## –ü–†–û–ë–õ–ï–ú–ê

### –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞:
1. **–ñ—É—Ä–Ω–∞–ª –ø–æ–¥—ñ–π –∑–Ω–∏–∫** - –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –∑–∞–ø–∏—Å–∏ –≤ —Ä–æ–∑–¥—ñ–ª—ñ "–ñ—É—Ä–Ω–∞–ª –ø–æ–¥—ñ–π"
2. **404 –ø–æ–º–∏–ª–∫–∞** - `GET https://darex-trading-solutions-f.onrender.com/api/event-log?page=1&limit=50 404 (Not Found)`
3. **–°—Ç–∞—Ç—É—Å "–û–Ω–ª–∞–π–Ω"** –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ —Ç–æ–≥–æ –∂ IP –∞–¥—Ä–µ—Å–∏
4. **–ü—Ä–æ–±–ª–µ–º–∞ –∑ API URL** - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∑–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ URL

---

## –î–Ü–ê–ì–ù–û–°–¢–ò–ö–ê

### –í–∏—è–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏:

1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π API URL:**
   - –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∑–≤–µ—Ä—Ç–∞–≤—Å—è –¥–æ: `darex-trading-solutions-f.onrender.com`
   - –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π URL: `darex-trading-solutions.onrender.com`

2. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å FALLBACK_MODE:**
   - Event log endpoints –Ω–µ –ø–µ—Ä–µ–≤—ñ—Ä—è–ª–∏ —Å—Ç–∞–Ω MongoDB
   - –í—ñ–¥—Å—É—Ç–Ω—î –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

3. **–ü—Ä–æ–±–ª–µ–º–∏ –∑ MongoDB –∑'—î–¥–Ω–∞–Ω–Ω—è–º:**
   - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è FALLBACK_MODE
   - –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤ –ø–æ–¥—ñ–π MongoDB

---

## –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø

### 1. –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ API URL —É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ

**–§–∞–π–ª–∏:**
- `frontend/src/utils/eventLogAPI.js`
- `frontend/src/utils/analyticsAPI.js`

**–ó–º—ñ–Ω–µ–Ω–æ:**
```javascript
// –°–¢–ê–†–ò–ô –ö–û–î
const API_BASE_URL = process.env.REACT_APP_API_URL || 
  (window.location.hostname === 'localhost' ? 'http://localhost:3001/api' : 'https://darex-trading-solutions-f.onrender.com/api');

// –ù–û–í–ò–ô –ö–û–î
const API_BASE_URL = process.env.REACT_APP_API_URL || 
  (window.location.hostname === 'localhost' ? 'http://localhost:3001/api' : 'https://darex-trading-solutions.onrender.com/api');
```

### 2. –î–æ–¥–∞–Ω–æ FALLBACK_MODE –¥–æ event log endpoints

**–§–∞–π–ª:** `backend/index.js`

**–î–æ–¥–∞–Ω–æ:**
```javascript
// –û—Ç—Ä–∏–º–∞—Ç–∏ –∂—É—Ä–Ω–∞–ª –ø–æ–¥—ñ–π –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏
app.get('/api/event-log', async (req, res) => {
  try {
    console.log('[DEBUG] GET /api/event-log - –æ—Ç—Ä–∏–º–∞–Ω–æ –∑–∞–ø–∏—Ç');
    
    if (FALLBACK_MODE) {
      console.log('[DEBUG] GET /api/event-log - FALLBACK_MODE –∞–∫—Ç–∏–≤–Ω–∏–π, –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –ø–æ—Ä–æ–∂–Ω—ñ–π –º–∞—Å–∏–≤');
      return res.json({
        events: [],
        pagination: {
          page: 1,
          limit: 50,
          total: 0,
          pages: 0
        }
      });
    }
    
    // ... —Ä–µ—à—Ç–∞ –∫–æ–¥—É
  } catch (error) {
    console.error('[ERROR] GET /api/event-log - –ø–æ–º–∏–ª–∫–∞:', error);
    res.status(500).json({ error: error.message });
  }
});
```

### 3. –ü–æ–∫—Ä–∞—â–µ–Ω–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è MongoDB

**–î–æ–¥–∞–Ω–æ:**
```javascript
// –û–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –∑'—î–¥–Ω–∞–Ω–Ω—è MongoDB
mongoose.connection.on('connected', () => {
  console.log('MongoDB –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ');
  FALLBACK_MODE = false;
});

mongoose.connection.on('error', (err) => {
  console.error('MongoDB –ø–æ–º–∏–ª–∫–∞ –∑\'—î–¥–Ω–∞–Ω–Ω—è:', err);
  FALLBACK_MODE = true;
});

mongoose.connection.on('disconnected', () => {
  console.log('MongoDB –≤—ñ–¥–∫–ª—é—á–µ–Ω–æ');
  FALLBACK_MODE = true;
});

mongoose.connection.on('reconnected', () => {
  console.log('MongoDB –ø–µ—Ä–µ–ø—ñ–¥–∫–ª—é—á–µ–Ω–æ');
  FALLBACK_MODE = false;
});
```

### 4. –î–æ–¥–∞–Ω–æ endpoint –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–ù–æ–≤–∏–π endpoint:** `/api/system-status`

```javascript
app.get('/api/system-status', async (req, res) => {
  try {
    const mongoStatus = mongoose.connection.readyState;
    const isConnected = mongoStatus === 1;
    
    res.json({
      mongoStatus,
      isConnected,
      fallbackMode: FALLBACK_MODE,
      readyState: mongoose.connection.readyState,
      host: mongoose.connection.host,
      port: mongoose.connection.port,
      name: mongoose.connection.name
    });
  } catch (error) {
    res.status(500).json({ 
      error: error.message,
      mongoStatus: mongoose.connection.readyState,
      fallbackMode: FALLBACK_MODE
    });
  }
});
```

---

## –†–ï–ó–£–õ–¨–¢–ê–¢–ò

### ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ:

1. **API URL –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ:**
   - –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ç–µ–ø–µ—Ä –∑–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ URL
   - 404 –ø–æ–º–∏–ª–∫–∞ —É—Å—É–Ω–µ–Ω–∞

2. **FALLBACK_MODE –¥–æ–¥–∞–Ω–æ:**
   - Event log endpoints —Ç–µ–ø–µ—Ä –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å —Å—Ç–∞–Ω MongoDB
   - –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –∑'—î–¥–Ω–∞–Ω–Ω—è

3. **–ü–æ–∫—Ä–∞—â–µ–Ω–æ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É:**
   - –î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π
   - Endpoint –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—Ç–∞–Ω—É —Å–∏—Å—Ç–µ–º–∏
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è FALLBACK_MODE

4. **–°—Ç–∞—Ç—É—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:**
   - –ü—Ä–æ–±–ª–µ–º–∞ –∑ IP-–∞–¥—Ä–µ—Å–∞–º–∏ –º–∞—î –±—É—Ç–∏ –≤–∏—Ä—ñ—à–µ–Ω–∞
   - –°—Ç–∞—Ç—É—Å "–û–Ω–ª–∞–π–Ω" —Ç–µ–ø–µ—Ä –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è:

1. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å URL** –º—ñ–∂ –≤—Å—ñ–º–∞ API —Ñ–∞–π–ª–∞–º–∏
2. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫** MongoDB
3. **–î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è** –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è** –∑'—î–¥–Ω–∞–Ω–Ω—è

---

## –¢–ï–°–¢–£–í–ê–ù–ù–Ø

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å:

1. **–í—ñ–¥–∫—Ä–∏–π—Ç–µ –∂—É—Ä–Ω–∞–ª –ø–æ–¥—ñ–π:**
   - –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ "–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä" ‚Üí "–ñ—É—Ä–Ω–∞–ª –ø–æ–¥—ñ–π"
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –¥–∞–Ω—ñ

2. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:**
   - –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ "–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä" ‚Üí "–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏"
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —Å—Ç–∞—Ç—É—Å "–û–Ω–ª–∞–π–Ω"

3. **–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º–∏:**
   - –í—ñ–¥–∫—Ä–∏–π—Ç–µ: `https://darex-trading-solutions.onrender.com/api/system-status`
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞–Ω MongoDB

### –û—á—ñ–∫—É–≤–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏:
- ‚úÖ –ñ—É—Ä–Ω–∞–ª –ø–æ–¥—ñ–π –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è
- ‚úÖ –°—Ç–∞—Ç—É—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ù–µ–º–∞—î 404 –ø–æ–º–∏–ª–æ–∫
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î —Å—Ç–∞–±—ñ–ª—å–Ω–æ

---

## –†–û–ó–ì–û–†–ù–£–¢–¢–Ø

### –°—Ç–∞—Ç—É—Å —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è:
- ‚úÖ **–ö–æ–¥ –∑–º—ñ–Ω–µ–Ω–æ** - –≤—Å—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –≤–Ω–µ—Å–µ–Ω–æ
- ‚úÖ **–§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–µ—Ä–µ–±—É–¥–æ–≤–∞–Ω–æ** - `npm run build` –≤–∏–∫–æ–Ω–∞–Ω–æ
- ‚úÖ **–ó–º—ñ–Ω–µ–Ω–æ –∑–∞–∫–æ–º—ñ—á–µ–Ω–æ** - git commit –≤–∏–∫–æ–Ω–∞–Ω–æ
- ‚úÖ **–ó–º—ñ–Ω–µ–Ω–æ –∑–∞–¥–µ–ø–ª–æ—î–Ω–æ** - git push –≤–∏–∫–æ–Ω–∞–Ω–æ

### –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
–ü—ñ—Å–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –Ω–∞ Render (–∑–∞–∑–≤–∏—á–∞–π 2-3 —Ö–≤–∏–ª–∏–Ω–∏):
- –ñ—É—Ä–Ω–∞–ª –ø–æ–¥—ñ–π –±—É–¥–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏
- –°—Ç–∞—Ç—É—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –±—É–¥–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- API endpoints –±—É–¥—É—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ñ

---

## –î–û–î–ê–¢–ö–û–í–Ü –ü–ï–†–ï–í–Ü–†–ö–ò

### –Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è:

1. **–û—á–∏—Å—Ç—ñ—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞** (Ctrl+F5)
2. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞** –Ω–∞ –ø–æ–º–∏–ª–∫–∏
3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞–Ω —Å–∏—Å—Ç–µ–º–∏:** `/api/system-status`
4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä** –Ω–∞ Render

### –ö–æ–Ω—Ç–∞–∫—Ç–∏ –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏:
- **Email:** support@darex-trading.com
- **Telegram:** @darex_support

---

## –í–ò–°–ù–û–í–û–ö

### ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –≤–∏—Ä—ñ—à–µ–Ω–∞:
- API URL –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ
- FALLBACK_MODE –¥–æ–¥–∞–Ω–æ
- –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–∫—Ä–∞—â–µ–Ω–æ
- –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¥–æ–¥–∞–Ω–∞

### üöÄ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞:
- –ö–æ–¥ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–æ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω
- –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–π—à–ª–æ —É—Å–ø—ñ—à–Ω–æ
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –æ–Ω–æ–≤–ª–µ–Ω–∞

---

*–ó–≤—ñ—Ç —Å—Ç–≤–æ—Ä–µ–Ω–æ: –í–µ—Ä–µ—Å–µ–Ω—å 2025*  
*–í–µ—Ä—Å—ñ—è: 1.0*  
*–°—Ç–∞—Ç—É—Å: –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ*  
*–°–∏—Å—Ç–µ–º–∞ DTS v2.0*
